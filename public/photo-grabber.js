// This is the bundled JavaScript file that gets injected via bookmarklet
// In a real build process, this would be generated by bundling the React app

// Bookmarklet code:
// javascript:(function(){const script=document.createElement('script');script.src='https://yourdomain.com/photo-grabber.js';document.head.appendChild(script);})();

// For development/testing, you can run this directly in the console:
(function() {
  // Check if PhotoGrabber is already loaded
  if (window.PhotoGrabberLoaded) {
    console.log('PhotoGrabber already loaded');
    return;
  }

  // Mark as loaded
  window.PhotoGrabberLoaded = true;

  // Simple injection function for testing
  window.injectPhotoGrabber = function() {
    console.log('Injecting PhotoGrabber...');
    
    // Remove existing instance
    const existing = document.getElementById('photo-grabber-root');
    if (existing) existing.remove();

    // Create a simple test UI for now
    const container = document.createElement('div');
    container.id = 'photo-grabber-root';
    container.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      background: #1f2937;
      color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      min-width: 250px;
    `;

    container.innerHTML = `
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="margin: 0; font-size: 16px;">PhotoGrabber</h3>
        <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: #9ca3af; cursor: pointer;">âœ•</button>
      </div>
      <p style="margin: 0; color: #9ca3af; font-size: 14px;">PhotoGrabber is ready!</p>
      <p style="margin: 10px 0 0 0; color: #6b7280; font-size: 12px;">This is a test version. Full React app will be loaded here.</p>
    `;

    document.body.appendChild(container);
    console.log('PhotoGrabber injected successfully!');
  };

  // Auto-inject if on Google Photos
  if (window.location.hostname === 'photos.google.com') {
    setTimeout(() => {
      console.log('Auto-injecting PhotoGrabber on Google Photos...');
      window.injectPhotoGrabber();
    }, 1000);
  } else {
    console.log('Not on Google Photos. Run injectPhotoGrabber() manually to test.');
  }
})();